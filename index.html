<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LINE Sticker Creator">
    <meta name="theme-color" content="#0A0A14">
    <title>LINE Sticker Creator - Premium Maker</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Poppins:wght@600;700;800&family=Outfit:wght@400;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"
                        fill="currentColor" />
                    <circle cx="12" cy="12" r="3" fill="currentColor" />
                </svg>
                <h1>LINE Sticker Creator</h1>
            </div>
            <div class="header-info">
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-label">STAMP COUNT</span>
                        <span class="stat-value" id="stickerCount">0</span>
                    </div>
                </div>
                <div class="header-guidelines">
                    <div class="guideline-item">
                        <span>üìê</span>
                        <span>370√ó320px</span>
                    </div>
                    <div class="guideline-item">
                        <span>üñºÔ∏è</span>
                        <span>Transparent PNG</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Side - Viewport & Collection -->
            <div class="main-view-column">
                <!-- Editor Section -->
                <section class="editor-panel section-card">
                    <div class="panel-header">
                        <h2>STAGE EDITOR</h2>
                        <button class="btn-icon" id="resetBtn" title="„É™„Çª„ÉÉ„Éà">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M17.65 6.35C16.2 4.9 14.21 4 12 4C7.58 4 4.01 7.58 4.01 12C4.01 16.42 7.58 20 12 20C15.73 20 18.84 17.45 19.73 14H17.65C16.83 16.33 14.61 18 12 18C8.69 18 6 15.31 6 12C6 8.69 8.69 6 12 6C13.66 6 15.14 6.69 16.22 7.78L13 11H20V4L17.65 6.35Z"
                                    fill="currentColor" />
                            </svg>
                        </button>
                    </div>

                    <!-- Canvas Area -->
                    <div class="canvas-container" id="canvas-container">
                        <canvas id="mainCanvas" width="370" height="320"></canvas>
                        <div class="canvas-overlay" id="uploadPrompt">
                            <svg class="upload-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="currentColor" />
                            </svg>
                            <p>ÁîªÂÉè„Çí„Éâ„É©„ÉÉ„Ç∞ÔºÜ„Éâ„É≠„ÉÉ„Éó<br>„Åæ„Åü„ÅØ „ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÈÅ∏Êäû</p>
                        </div>
                    </div>

                    <p class="hint-text text-center">üí° „ÉÄ„Éñ„É´„ÇØ„É™„ÉÉ„ÇØ„Åß„Ç¢„Ç§„ÉÜ„É†ÂâäÈô§„ÄÅ„Éâ„É©„ÉÉ„Ç∞„ÅßÁßªÂãï</p>

                    <!-- Main Actions - Moved back to Editor for visibility -->
                    <div class="action-buttons" style="margin-top: 20px;">
                        <button class="btn-success" id="saveSticker">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3ZM19 19H5V5H16.17L19 7.83V19ZM12 12C10.34 12 9 13.34 9 15C9 16.66 10.34 18 12 18C13.66 18 15 16.66 15 15C15 13.34 13.66 12 12 12ZM6 6H15V10H6V6Z"
                                    fill="currentColor" />
                            </svg>
                            SAVE STAMP
                        </button>
                        <button class="btn-primary" id="downloadCurrent">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M19 12V19H5V12H3V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V12H19ZM13 12.67L15.59 10.09L17 11.5L12 16.5L7 11.5L8.41 10.09L11 12.67V3H13V12.67Z"
                                    fill="currentColor" />
                            </svg>
                            DOWNLOAD
                        </button>
                    </div>
                </section>

                <!-- Collection Section (Moved here to the bottom of the left side) -->
                <section class="collection-panel section-card">
                    <div class="panel-header">
                        <h2>COLLECTION</h2>
                        <div class="header-actions" style="display: flex; gap: 8px;">
                            <button class="btn-icon" id="clearAllBtn" title="ÂÖ®„Å¶ÂâäÈô§">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5 4H5V6H19V4Z"
                                        fill="currentColor" />
                                </svg>
                            </button>
                            <button class="btn-success" id="downloadAllBtn" onclick="downloadAllStickers()">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19 9H15V3H9V9H5L12 16L19 9ZM5 18V20H19V18H5Z" fill="currentColor" />
                                </svg>
                                ZIP
                            </button>
                        </div>
                    </div>

                    <div class="sticker-grid" id="stickerGrid">
                        <!-- Empty State -->
                        <div class="empty-state">
                            <p>No stickers yet</p>
                            <p class="empty-hint">Create your first stamp in the editor!</p>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right Side - Tool Panels -->
            <div class="side-tools-column">
                <section class="tools-panel section-card">
                    <div class="panel-header">
                        <h2>TOOLS</h2>
                    </div>

                    <div class="tools-section">
                        <!-- Image Adjustment -->
                        <div class="tool-group">
                            <label class="tool-label">Image Adjustment</label>
                            <div class="grid-3-cols">
                                <button class="btn-secondary" id="cropBtn" disabled title="Áü©ÂΩ¢Âàá„ÇäÊäú„Åç">RECT</button>
                                <button class="btn-secondary" id="freeHandBtn" disabled title="Ëá™Áî±Âàá„ÇäÊäú„Åç">FREE</button>
                                <button class="btn-secondary" id="autoCutBtn" disabled title="Ëá™ÂãïÂàá„ÇäÊäú„Åç">AUTO</button>
                            </div>
                        </div>

                        <!-- Transformation -->
                        <div class="tool-group property-editor" id="propertyEditor">
                            <label class="tool-label">Transformation</label>
                            <div class="style-controls">
                                <label class="control-sublabel">SIZE</label>
                                <input type="range" id="globalSize" min="10" max="200" step="1" value="100">
                                <span class="size-label" id="globalSizeValue">100%</span>
                            </div>
                            <div class="style-controls">
                                <label class="control-sublabel">ROTATE</label>
                                <input type="range" id="globalRotation" min="0" max="360" step="1" value="0">
                                <span class="size-label" id="globalRotationValue">0¬∞</span>
                            </div>
                        </div>

                        <!-- Text Add -->
                        <div class="tool-group">
                            <label class="tool-label">Typography</label>
                            <div class="input-group" style="display: flex; gap: 10px;">
                                <input type="text" id="textInput" placeholder="„ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖ•Âäõ..." maxlength="20">
                                <button class="btn-primary" id="addTextBtn">ADD</button>
                            </div>
                            <div class="grid-2-cols" style="margin-top: 10px;">
                                <input type="color" id="textColor" value="#000000" title="„ÉÜ„Ç≠„Çπ„ÉàËâ≤">
                                <select id="fontWeight">
                                    <option value="400">Normal</option>
                                    <option value="700" selected>Bold</option>
                                    <option value="900">Heavy</option>
                                </select>
                            </div>
                        </div>

                        <!-- Overlays & Effects -->
                        <div class="tool-group">
                            <label class="tool-label">Overlays & Effects</label>
                            <div class="input-group" style="display: flex; gap: 10px;">
                                <select id="effectSelect" style="flex: 1;">
                                    <option value="" disabled selected>ÂäπÊûú„ÇíÈÅ∏Êäû...</option>
                                    <option value="sweat">üí¶ Ê±ó</option>
                                    <option value="tears">üò¢ Ê≥£„ÅçÈ°î</option>
                                    <option value="heart">‚ù§Ô∏è „Éè„Éº„Éà</option>
                                    <option value="star">‚≠ê Êòü</option>
                                    <option value="anger">üí¢ ÊÄí„Çä</option>
                                    <option value="zzz">üí§ Áú†„Çä</option>
                                    <option value="sparkle">‚ú® „Åç„Çâ„Åç„Çâ</option>
                                    <option value="note">üéµ Èü≥Á¨¶</option>
                                    <option value="exclam">‚ùó „Éì„ÉÉ„ÇØ„É™</option>
                                    <option value="question">‚ùì „ÅØ„Å¶„Å™</option>
                                    <option value="laugh">üòÜ Á¨ë„ÅÑ</option>
                                    <option value="thumbsup">üëç „Ç∞„ÉÉ„Éâ</option>
                                    <option value="fire">üî• ÁáÉ„Åà„Çã</option>
                                    <option value="skull">üíÄ „Éâ„ÇØ„É≠</option>
                                    <option value="bulb">üí° „Å≤„Çâ„ÇÅ„Åç</option>
                                    <option value="ok">‚≠ï OK</option>
                                </select>
                                <button class="btn-primary" id="addEffectBtn">ADD</button>
                            </div>
                        </div>

                        <!-- Canvas Style -->
                        <div class="tool-group">
                            <label class="tool-label">Canvas Backdrop</label>
                            <div class="grid-3-cols">
                                <button class="btn-secondary" id="transparentBg">ÈÄèÊòé</button>
                                <button class="btn-secondary" id="whiteBg">ÁôΩËâ≤</button>
                                <input type="color" id="bgColor" value="#ffffff" title="ËÉåÊôØËâ≤">
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Crop Modal -->
    <div class="modal hidden" id="cropModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Rectangle Crop</h3>
                <button class="btn-icon" id="closeCropBtn"
                    style="border:none;background:none;font-size:1.5rem;">√ó</button>
            </div>
            <div class="crop-container">
                <img id="cropImage" src="">
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelCropBtn">CANCEL</button>
                <button class="btn-primary" id="applyCropBtn">APPLY CROP</button>
            </div>
        </div>
    </div>

    <!-- Freehand Crop Modal -->
    <div class="modal hidden" id="freeHandModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Freehand Cutout</h3>
                <button class="btn-icon" id="closeFreeHandBtn"
                    style="border:none;background:none;font-size:1.5rem;">√ó</button>
            </div>
            <div class="crop-container bg-checkerboard">
                <canvas id="freeHandCanvas"></canvas>
            </div>
            <div class="modal-footer space-between">
                <p style="font-size: 0.8rem; opacity: 0.7;">üñåÔ∏è Draw around the area you want to keep/remove</p>
                <div style="display: flex; gap: 10px;">
                    <button class="btn-secondary" id="resetFreeHandBtn">RESET</button>
                    <button class="btn-success" id="keepInsideBtn">KEEP INSIDE</button>
                    <button class="btn-danger" id="removeInsideBtn">REMOVE INSIDE</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="script.js"></script>
</body>

</html>